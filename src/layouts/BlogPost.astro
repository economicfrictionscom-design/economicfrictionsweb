---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Comments from '../components/Comments.astro';
import Subscribe from '../components/Subscribe.astro';
import FloatingSubscribe from '../components/FloatingSubscribe.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <article class="max-w-4xl mx-auto">
    
    <div class="mb-12 text-center">
      {/* Date & Title Only (Image Removed from here) */}
      <div class="space-y-4 mb-8">
        <div class="text-slate-500 dark:text-slate-400 font-mono text-sm uppercase tracking-wider">
          <FormattedDate date={pubDate} />
          {updatedDate && (
            <div class="italic">
              Last updated on <FormattedDate date={updatedDate} />
            </div>
          )}
        </div>
        <h1 class="text-4xl md:text-6xl font-serif font-bold text-slate-900 dark:text-white leading-tight">
          {title}
        </h1>
        <hr class="border-t border-slate-200 dark:border-slate-800 my-8 w-24 mx-auto" />
      </div>
    </div>

    {/* Blog Content */}
    <div class="prose prose-lg dark:prose-invert font-serif max-w-none text-slate-800 dark:text-slate-300 leading-relaxed mx-auto">
      <slot />
    </div>

    {/* Static Subscribe & Comments Section (With ID for detection) */}
    <div id="static-subscribe-section" class="mt-20 border-t border-slate-200 dark:border-slate-800 pt-10">
      <Subscribe />
      <div class="mt-12">
        <Comments />
      </div>
    </div>

    {/* The Floating Component */}
    <FloatingSubscribe />

  </article>
</BaseLayout>