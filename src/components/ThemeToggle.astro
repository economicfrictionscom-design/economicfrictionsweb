<button 
  id="theme-toggle" 
  aria-label="Toggle Dark Mode" 
  class="p-2 rounded-full cursor-pointer hover:bg-stone-200 dark:hover:bg-stone-800 transition-colors z-50 relative"
>
  <svg id="sun-icon" class="w-6 h-6 text-stone-100 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
  </svg>
  
  <svg id="moon-icon" class="w-6 h-6 text-stone-800 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
  </svg>
</button>

<script is:inline>
  // 1. Wait for the page to be fully ready
  document.addEventListener('DOMContentLoaded', () => {
    
    const themeToggle = document.getElementById('theme-toggle');
    
    // Safety check: if button doesn't exist, stop
    if (!themeToggle) {
      console.error('Theme toggle button not found');
      return;
    }

    const handleToggleClick = () => {
      // 2. Log to console to prove it was clicked
      console.log('Theme toggle clicked!');
      
      const element = document.documentElement;
      element.classList.toggle("dark");
      
      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    themeToggle.addEventListener("click", handleToggleClick);
  });
</script>